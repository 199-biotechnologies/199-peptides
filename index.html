<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ducu & Bo' Peptides</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary: #1a1a2e;
            --accent: #4a6fa5;
            --text: #2d3748;
            --text-light: #718096;
            --bg: #f7fafc;
            --bg-paper: #ffffff;
            --border: #e2e8f0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }

        /* Password Screen */
        .password-screen {
            position: fixed;
            inset: 0;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .password-screen.hidden { display: none; }

        .password-box {
            background: var(--bg-paper);
            padding: 3rem;
            border-radius: 16px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .password-box h1 {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .password-box p {
            color: var(--text-light);
            margin-bottom: 2rem;
        }

        .password-box input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 1rem;
            outline: none;
        }

        .password-box input:focus { border-color: var(--accent); }
        .password-box input.error { border-color: #e53e3e; animation: shake 0.5s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .password-box button {
            width: 100%;
            padding: 1rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
        }

        .password-box button:hover { background: #3d5d8a; }

        .error-msg { color: #e53e3e; margin-top: 1rem; display: none; }
        .error-msg.visible { display: block; }

        /* App Layout */
        .app { display: none; }
        .app.visible { display: flex; min-height: 100vh; }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: var(--bg-paper);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 1.25rem 1.5rem;
            background: var(--primary);
            color: white;
        }

        .sidebar-header h1 {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .sidebar-header p {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        /* Search */
        .search-box {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .search-wrapper {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.6rem 2.5rem 0.6rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.85rem;
            outline: none;
        }

        .search-input:focus { border-color: var(--accent); }

        .search-clear {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--border);
            border: none;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: var(--text-light);
        }

        .search-clear:hover { background: var(--text-light); color: white; }
        .search-clear.visible { display: flex; }

        /* Navigation */
        .nav-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem 0;
        }

        .nav-section {
            margin-bottom: 0.25rem;
        }

        .nav-section-header {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            cursor: pointer;
            user-select: none;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-light);
            font-weight: 600;
        }

        .nav-section-header:hover { background: var(--bg); }

        .nav-section-header .icon { margin-right: 0.5rem; }
        .nav-section-header .name { flex: 1; }
        .nav-section-header .count {
            background: var(--bg);
            padding: 0.1rem 0.4rem;
            border-radius: 8px;
            font-size: 0.65rem;
            margin-right: 0.5rem;
        }
        .nav-section-header .chevron {
            font-size: 0.6rem;
            transition: transform 0.2s;
        }

        .nav-section.collapsed .chevron { transform: rotate(-90deg); }
        .nav-section.collapsed .nav-items { display: none; }

        .nav-items { padding-bottom: 0.25rem; }

        .nav-item {
            display: block;
            padding: 0.5rem 1rem 0.5rem 2.25rem;
            font-size: 0.85rem;
            color: var(--text);
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all 0.1s;
        }

        .nav-item:hover {
            background: var(--bg);
            color: var(--accent);
        }

        .nav-item.active {
            background: rgba(74, 111, 165, 0.1);
            color: var(--accent);
            border-left-color: var(--accent);
            font-weight: 500;
        }

        .nav-item.hidden { display: none; }

        .nav-item .subtitle {
            font-size: 0.7rem;
            color: var(--text-light);
            display: block;
        }

        /* Main Content */
        .main {
            flex: 1;
            margin-left: 300px;
            padding: 2rem;
            max-width: 900px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .breadcrumb a {
            color: var(--accent);
            text-decoration: none;
            cursor: pointer;
        }

        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb .separator { opacity: 0.5; }

        .content {
            background: var(--bg-paper);
            padding: 2.5rem;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        /* Welcome */
        .welcome { text-align: center; padding: 3rem 1rem; }
        .welcome h1 { font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem; border: none; }
        .welcome p { color: var(--text-light); margin-bottom: 2rem; }

        .welcome-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            max-width: 500px;
            margin: 0 auto;
            text-align: left;
        }

        .welcome-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .welcome-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .welcome-card h3 { font-size: 0.95rem; color: var(--primary); margin-bottom: 0.25rem; }
        .welcome-card p { font-size: 0.8rem; color: var(--text-light); margin: 0; }

        /* Markdown */
        .content h1 {
            font-size: 1.75rem;
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--accent);
        }

        .content h2 {
            font-size: 1.3rem;
            color: var(--primary);
            margin: 2rem 0 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .content h3 { font-size: 1.1rem; color: var(--text); margin: 1.5rem 0 0.5rem; }
        .content p { margin-bottom: 1rem; line-height: 1.8; }
        .content ul, .content ol { margin: 1rem 0 1.5rem 1.5rem; }
        .content li { margin-bottom: 0.4rem; }
        .content strong { color: var(--primary); }

        .content blockquote {
            border-left: 4px solid var(--accent);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background: var(--bg);
            border-radius: 0 8px 8px 0;
        }

        .content code {
            font-family: 'SF Mono', monospace;
            font-size: 0.85em;
            background: var(--bg);
            padding: 0.2em 0.4em;
            border-radius: 4px;
        }

        .content pre {
            background: var(--primary);
            color: #e2e8f0;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .content pre code { background: none; padding: 0; }

        .content hr {
            border: none;
            height: 1px;
            background: var(--border);
            margin: 2rem 0;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.9rem;
        }

        .content th {
            background: var(--primary);
            color: white;
            padding: 0.6rem 0.75rem;
            text-align: left;
            font-weight: 500;
            font-size: 0.8rem;
        }

        .content td {
            padding: 0.6rem 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .content tr:hover { background: var(--bg); }
        .content a { color: var(--accent); }

        .no-results {
            padding: 1rem;
            text-align: center;
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .no-results a {
            color: var(--accent);
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar { width: 260px; }
            .main { margin-left: 260px; padding: 1.5rem; }
        }

        @media (max-width: 700px) {
            .app.visible { flex-direction: column; }
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                max-height: 40vh;
            }
            .main { margin-left: 0; }
            .welcome-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Password -->
    <div class="password-screen" id="passwordScreen">
        <div class="password-box">
            <h1>Ducu & Bo' Peptides</h1>
            <p>Enter password to access</p>
            <input type="password" id="passwordInput" placeholder="Password" onkeypress="if(event.key==='Enter')checkPassword()">
            <button onclick="checkPassword()">Enter</button>
            <p class="error-msg" id="errorMsg">Incorrect password</p>
        </div>
    </div>

    <!-- App -->
    <div class="app" id="app">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>Ducu & Bo' Peptides</h1>
                <p>Research Documentation</p>
            </div>

            <div class="search-box">
                <div class="search-wrapper">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search..." oninput="handleSearch(this.value)">
                    <button class="search-clear" id="searchClear" onclick="clearSearch()">‚úï</button>
                </div>
            </div>

            <div class="nav-scroll" id="navScroll"></div>
        </nav>

        <main class="main">
            <div class="breadcrumb" id="breadcrumb"></div>
            <div class="content" id="content">
                <div class="welcome">
                    <h1>Welcome</h1>
                    <p>Select a document from the sidebar to get started</p>
                    <div class="welcome-grid">
                        <div class="welcome-card" onclick="loadFile('protocols/titan-protocol.md')">
                            <h3>üìã TITAN Protocol</h3>
                            <p>Complete longevity protocol</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/bpc-157-research.md')">
                            <h3>üî¨ BPC-157</h3>
                            <p>Body protection compound</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/semaglutide-research.md')">
                            <h3>üíä Semaglutide</h3>
                            <p>GLP-1 for weight loss</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/epitalon-research.md')">
                            <h3>‚è≥ Epitalon</h3>
                            <p>Telomerase activator</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const PASS = 'limitless';

        function checkPassword() {
            const input = document.getElementById('passwordInput');
            if (input.value === PASS) {
                sessionStorage.setItem('auth', '1');
                document.getElementById('passwordScreen').classList.add('hidden');
                document.getElementById('app').classList.add('visible');
                init();
            } else {
                input.classList.add('error');
                document.getElementById('errorMsg').classList.add('visible');
                setTimeout(() => input.classList.remove('error'), 500);
            }
        }

        if (sessionStorage.getItem('auth') === '1') {
            document.getElementById('passwordScreen').classList.add('hidden');
            document.getElementById('app').classList.add('visible');
        } else {
            document.getElementById('passwordInput').focus();
        }

        marked.setOptions({ breaks: true, gfm: true });

        const categories = {
            protocols: { name: 'Protocols', icon: 'üìã', files: [
                { file: 'protocols/titan-protocol.md', name: 'TITAN Protocol', subtitle: 'Complete longevity protocol' }
            ]},
            gh_metabolic: { name: 'GH Axis & Metabolic', icon: '‚ö°', files: [
                { file: 'peptides/tesamorelin-research.md', name: 'Tesamorelin', subtitle: 'FDA approved GHRH' },
                { file: 'peptides/ipamorelin-research.md', name: 'Ipamorelin', subtitle: 'Selective GH secretagogue' },
                { file: 'peptides/cjc-1295-research.md', name: 'CJC-1295', subtitle: 'GHRH analog' },
                { file: 'peptides/igf-1-lr3-research.md', name: 'IGF-1 LR3', subtitle: 'Long-acting IGF-1' },
                { file: 'peptides/follistatin-344-research.md', name: 'Follistatin-344', subtitle: 'Myostatin inhibitor' },
                { file: 'peptides/semaglutide-research.md', name: 'Semaglutide', subtitle: 'GLP-1 (Ozempic)' },
                { file: 'peptides/tirzepatide-research.md', name: 'Tirzepatide', subtitle: 'GIP/GLP-1 (Mounjaro)' },
                { file: 'peptides/retatrutide-research.md', name: 'Retatrutide', subtitle: 'Triple agonist' },
                { file: 'peptides/aod-9604-research.md', name: 'AOD-9604', subtitle: 'HGH fragment' },
                { file: 'peptides/adipotide-research.md', name: 'Adipotide', subtitle: 'Fat-targeting' }
            ]},
            tissue: { name: 'Tissue Repair', icon: 'ü©π', files: [
                { file: 'peptides/bpc-157-research.md', name: 'BPC-157', subtitle: 'Body protection compound' },
                { file: 'peptides/tb-500-research.md', name: 'TB-500', subtitle: 'Thymosin Beta-4' },
                { file: 'peptides/ghk-cu-research.md', name: 'GHK-Cu', subtitle: 'Copper peptide' },
                { file: 'peptides/teriparatide-research.md', name: 'Teriparatide', subtitle: 'PTH for bone' }
            ]},
            cognitive: { name: 'Cognitive', icon: 'üß†', files: [
                { file: 'peptides/semax-research.md', name: 'Semax', subtitle: 'Nootropic' },
                { file: 'peptides/selank-research.md', name: 'Selank', subtitle: 'Anxiolytic' },
                { file: 'peptides/dihexa-research.md', name: 'Dihexa', subtitle: 'HGF mimetic (caution)' },
                { file: 'peptides/phdp5-research.md', name: 'PHDP-5', subtitle: 'Cognitive peptide' }
            ]},
            immune: { name: 'Immune & Thymus', icon: 'üõ°Ô∏è', files: [
                { file: 'peptides/thymalin-research.md', name: 'Thymalin', subtitle: 'Thymic peptide' },
                { file: 'peptides/thymosin-alpha-1-research.md', name: 'Thymosin Alpha-1', subtitle: 'Immune modulator' },
                { file: 'peptides/thymogen-research.md', name: 'Thymogen', subtitle: 'Thymic dipeptide' },
                { file: 'peptides/kpv-research.md', name: 'KPV', subtitle: 'Anti-inflammatory' },
                { file: 'peptides/gcmaf-research.md', name: 'GcMAF', subtitle: 'Macrophage activator' },
                { file: 'peptides/cecropins-research.md', name: 'Cecropins', subtitle: 'Antimicrobial' }
            ]},
            longevity: { name: 'Longevity', icon: '‚è≥', files: [
                { file: 'peptides/epitalon-research.md', name: 'Epitalon', subtitle: 'Telomerase activator' },
                { file: 'peptides/mots-c-research.md', name: 'MOTS-c', subtitle: 'Mitochondrial peptide' },
                { file: 'peptides/humanin-research.md', name: 'Humanin', subtitle: 'Cytoprotective' },
                { file: 'peptides/ss-31-research.md', name: 'SS-31', subtitle: 'Mitochondrial protector' },
                { file: 'peptides/nad-research.md', name: 'NAD+', subtitle: 'Cellular energy' }
            ]},
            sexual: { name: 'Sexual & Hormonal', icon: 'üíú', files: [
                { file: 'peptides/pt-141-research.md', name: 'PT-141', subtitle: 'Sexual function' },
                { file: 'peptides/melanotan-2-research.md', name: 'Melanotan II', subtitle: 'Tanning & libido' },
                { file: 'peptides/kisspeptin-research.md', name: 'Kisspeptin', subtitle: 'GnRH regulator' },
                { file: 'peptides/oxytocin-research.md', name: 'Oxytocin', subtitle: 'Bonding hormone' }
            ]},
            sleep: { name: 'Sleep', icon: 'üò¥', files: [
                { file: 'peptides/dsip-research.md', name: 'DSIP', subtitle: 'Sleep-inducing' },
                { file: 'peptides/vip-research.md', name: 'VIP', subtitle: 'Vasoactive peptide' }
            ]},
            organ: { name: 'Organ-Specific', icon: 'ü´Ä', files: [
                { file: 'peptides/cardiogen-research.md', name: 'Cardiogen', subtitle: 'Cardiac' },
                { file: 'peptides/bronchogen-research.md', name: 'Bronchogen', subtitle: 'Lung' },
                { file: 'peptides/prostamax-research.md', name: 'Prostamax', subtitle: 'Prostate' },
                { file: 'peptides/nk-peptide-research.md', name: 'NK Peptide', subtitle: 'Kidney' },
                { file: 'peptides/melittin-research.md', name: 'Melittin', subtitle: 'Bee venom' }
            ]}
        };

        let currentFile = null;

        function init() {
            renderNav();
            if (window.location.hash) {
                const file = decodeURIComponent(window.location.hash.slice(1));
                if (file) loadFile(file, false);
            }
            window.addEventListener('popstate', (e) => {
                if (e.state?.file) loadFile(e.state.file, false);
                else showWelcome();
            });
        }

        function renderNav() {
            const nav = document.getElementById('navScroll');
            nav.innerHTML = Object.entries(categories).map(([key, cat]) => `
                <div class="nav-section" data-key="${key}">
                    <div class="nav-section-header" onclick="toggleSection('${key}')">
                        <span class="icon">${cat.icon}</span>
                        <span class="name">${cat.name}</span>
                        <span class="count">${cat.files.length}</span>
                        <span class="chevron">‚ñº</span>
                    </div>
                    <div class="nav-items">
                        ${cat.files.map(f => `
                            <div class="nav-item" data-file="${f.file}" onclick="loadFile('${f.file}')">
                                ${f.name}
                                <span class="subtitle">${f.subtitle}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function toggleSection(key) {
            document.querySelector(`.nav-section[data-key="${key}"]`).classList.toggle('collapsed');
        }

        async function loadFile(filePath, pushState = true) {
            currentFile = filePath;

            // Update active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.file === filePath);
            });

            // Update breadcrumb
            let catName = '', fileName = '';
            for (const [key, cat] of Object.entries(categories)) {
                const found = cat.files.find(f => f.file === filePath);
                if (found) {
                    catName = cat.name;
                    fileName = found.name;
                    break;
                }
            }

            document.getElementById('breadcrumb').innerHTML = `
                <a onclick="showWelcome()">Home</a>
                <span class="separator">/</span>
                <span>${catName}</span>
                <span class="separator">/</span>
                <span>${fileName}</span>
            `;

            // Load content
            const content = document.getElementById('content');
            content.innerHTML = '<p style="color:var(--text-light);padding:2rem;text-align:center;">Loading...</p>';

            try {
                const res = await fetch(filePath);
                if (!res.ok) throw new Error();
                content.innerHTML = marked.parse(await res.text());
                window.scrollTo(0, 0);
            } catch {
                content.innerHTML = `<p style="color:#e53e3e;padding:2rem;">Could not load ${filePath}</p>`;
            }

            if (pushState) {
                history.pushState({ file: filePath }, '', `#${encodeURIComponent(filePath)}`);
            }
        }

        function showWelcome() {
            currentFile = null;
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('breadcrumb').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <div class="welcome">
                    <h1>Welcome</h1>
                    <p>Select a document from the sidebar to get started</p>
                    <div class="welcome-grid">
                        <div class="welcome-card" onclick="loadFile('protocols/titan-protocol.md')">
                            <h3>üìã TITAN Protocol</h3>
                            <p>Complete longevity protocol</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/bpc-157-research.md')">
                            <h3>üî¨ BPC-157</h3>
                            <p>Body protection compound</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/semaglutide-research.md')">
                            <h3>üíä Semaglutide</h3>
                            <p>GLP-1 for weight loss</p>
                        </div>
                        <div class="welcome-card" onclick="loadFile('peptides/epitalon-research.md')">
                            <h3>‚è≥ Epitalon</h3>
                            <p>Telomerase activator</p>
                        </div>
                    </div>
                </div>
            `;
            history.pushState({}, '', window.location.pathname);
        }

        function handleSearch(query) {
            const q = query.toLowerCase().trim();
            const clearBtn = document.getElementById('searchClear');
            clearBtn.classList.toggle('visible', q.length > 0);

            document.querySelectorAll('.nav-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                item.classList.toggle('hidden', q && !text.includes(q));
            });

            document.querySelectorAll('.nav-section').forEach(section => {
                const hasVisible = section.querySelectorAll('.nav-item:not(.hidden)').length > 0;
                section.style.display = hasVisible ? '' : 'none';
                if (q && hasVisible) section.classList.remove('collapsed');
            });

            // Show no results message
            const nav = document.getElementById('navScroll');
            const existing = nav.querySelector('.no-results');
            if (existing) existing.remove();

            if (q && !document.querySelector('.nav-item:not(.hidden)')) {
                nav.innerHTML += `<div class="no-results">No results for "${q}"<br><a onclick="clearSearch()">Clear search</a></div>`;
            }
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchClear').classList.remove('visible');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('hidden'));
            document.querySelectorAll('.nav-section').forEach(s => s.style.display = '');
            const nr = document.querySelector('.no-results');
            if (nr) nr.remove();
        }

        document.addEventListener('keydown', e => {
            if (e.key === '/' && document.activeElement.tagName !== 'INPUT') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (e.key === 'Escape') {
                clearSearch();
                document.getElementById('searchInput').blur();
            }
        });

        if (sessionStorage.getItem('auth') === '1') init();
    </script>
</body>
</html>
